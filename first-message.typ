#import "@preview/wrap-it:0.1.1": *
#import "sifra.typ"

#set text(font: "JetBrains Mono")

#let sep = box(place(top+left, dy: -0.6em, dx: -0.25em, text(size: 0.8em, fill: gray, ".")))
#let sep-bar = box(place(top+left, dy: -0.65em, dx: -0.25em, text(size: 0.8em, fill: gray, "|")))

#set page(
  paper: "a4",
  margin: (x: 1cm, y: 1cm),
  header: [#align(center, [DRSS Institut])],
  footer: [#grid(columns: (auto, 1fr, auto), [20#[#sep]18#[#sep]9#[#sep]19#[#sep]15#[#sep]12#[#sep-bar]2025], [], [Přepisový formulář DaI\#25])]
)


#let wave-ascii = image("images/audio-1.svg", height: 2.5em, width: 23em)

#let sender-img = block(stroke: none,// {{{
  par(leading: 0.3em, text(font: "JetBrains Mono", size: 4.0pt, "@@@@@@@@@@@@@@@%@%%@%@%%%%%%@%@%@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%@@@@@@@@@%@@@@@@@@@@@%%@@@@
@@@@@@@%@%@%@%@%%@%%%%%%%%%%%%%%%%@%@@%@@@@@@@@@@@@@@@@@@@%%%@%%%%%%%%%@@@%@@@@@@@@@@@@@@@@@@@%%%%%@
@@@@@%%@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%@%@%@%@@@@@@@@@@%%%%%%%%%%%%%%%%%@%@@@@@@@@@@@@@@@@@@@%%%@@
@%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%@%@%@%@%@%@@%@%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@%@@@%@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%%%%%%%%%@%%@%%%%%%%%@%@@@@@@@@@@@%@@@@@%%%%%%
%%%%%%%%%%%%%%%%%###******###%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%@%%@@%@%@%@@@%@%%%@@%%%%%@@%%@@
%%%%%%%%%%%%%%###****+==***###%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%@%%%%%%%@%%%%%%%%@%
%%%%%%%%%%%####****=-:::-+****#####%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%@@
%%%%%%%%%#####****=-::::-==*****######%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%####***==--=+***####%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@
%%%%%%%%%%%%%%%####********##%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%########%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%@%
@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%@%@
@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%@%@%%%%%%@%@%@%%%%%%%%%%%@%@%@%%%@%%%%%@%%%%@@@
@@@@@@@@%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%@@%@%@@%%%@%%%%%%%%%%%#%#****####%%%%%%%%%%@%@%@@
@@@@@@@@@%%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%@%@@%%@%@%%@%%%%%%%%%%%%%###**====+*##%%%%%%%%%@@@@@@
@@@@@@@@@@@%@@@%@%%%%%%%%%%%%%%%%%%%%@%@%@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%##**=:::-=**#%%%%%%%%%%@@@@@
@@@@@@@@@@@@@@@@@%@@%%%%%%%%%%%@%%%@@%@@@%@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%##**+-::=+*##%%%%%%%%%@%@@@@
@@@@@@@@@@@@@@@%@%@@@%@%@@@@@@@%@%@%@@@@@@@@@@@@@@@@%@@@@@%%%%%%%%%%%%%%%##*******###%%%%%%%@@@@@@@@
@@@@@@@@@@@@@@@@%@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@@%@@@%@%%%%%%%%%%%%%%#######%%%%%%%%%%%%@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@%@%@@@%@@@@%@@%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@%%%@@@@@%%%%%%%@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%@@%@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@%%@@@@@@%%%%%@@@@@@@@@@@@@%@@@%@%%%%%%%%%%%%%%%%%@%@%@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@%@%%@%@%%@%@%@%%%%%@%@%@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@%%@%@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@%%%%%%@%%@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@%@@@%%@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@%@@@@@@@@%@@@@@@@%@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@%@@%@%%%%%%%%%%@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%#**##%%%%%%%@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@%@@@@%%%@@%@%%%%%%%%%%%%%%%%##**=-=**##%%%%%%%%%%%%%%%%%%%%@%@%@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%@@@@@%@%@@%%%%%%#***#%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
")))// }}}


// #let body-grid = grid(
//   columns: 1,
//   [#wrap-content( sender-img, [#par(justify: true, lorem(500))], align: top + right, column-gutter: 1em)]
// )
//
#let text-intro = par[
  > zpráva neznámého formátu \
  _[POKUS DEKODOVANI ZPRAVY]_

  #grid(
    columns: (1fr, 1fr),
    inset: 0.3em,
    [*ASCII*], [\.\.\.\.\. _[CHYBA]_],
    [*EBCDIC*], [\.\.\.\.\. _[CHYBA]_],
    [*UNICODE*], [\.\.\.\.\. _[CHYBA]_],
    [*JPEG*], [\.\.\.\.\. _[CHYBA]_],
    [*PNG*], [\.\.\.\.\. _[CHYBA]_],
    [*WAV*], [\.\.\.\.\. _[CHYBA]_],
    [*MIDI*], [\.\.\.\.\. _[CHYBA]_],
    [*POSTSCRIPT*], [\.\.\.\.\. _[SHODA 98 %]_],
  )


  #v(1em)
  _Vykreslená zpráva:_
]

#let text-main = par[
  #let show-solution = false
  #sifra.grid-cipher("Dane,", solution: show-solution) \
  #sifra.grid-cipher("Nejiste trajektorie tri nasich slunci nici nasi civilizaci po tisicileti. Byl jsi vybran abys nam pomohl.", solution: show-solution)
  #sifra.grid-cipher("Potkej ozveny osob minulych. Konfrontuj vyzvy. Dokaz ze jsi hoden. Zachran nas druh. ", solution: show-solution)
  #sifra.grid-cipher("Dostan se ASAP do Hostalkove", solution: show-solution) \
  #sifra.grid-cipher("Tekutina umoznuje komunikaci. Pij alespon po hodine.", solution: show-solution) \
  #sifra.grid-cipher("Pokud selzes, obsadime Zemi, zotrocime lidstvo… a zrusime ti svatbu. A to nechces.", solution: show-solution) \
  #sifra.grid-cipher("Hodne stesti, budeme te ocekavat. trisolane", solution: show-solution) \
  #sifra.grid-cipher("mapy.com/", solution: show-solution) \

]

#let body-grid = grid(
  columns: 1,
  grid.cell(grid(
    columns: (1fr, 1fr),
    grid.cell(inset: 0.5em, text-intro),
    grid.cell(
      stroke: 1pt + black,
      inset: 0.7em,
      align(center + horizon, sender-img)
    )
 
  )),
  grid.cell(inset: 0.5em, text-main)
)




#table(
  columns: (1fr, 1fr),

  align(horizon, text(weight: "bold", size: 1.2em, [Přepis přijaté zprávy])),
  [#wave-ascii],
  [*Zdroj:* RA 14h39m36.5s, Dec −60°50′02″],
  [*Odesílatel:* t̷░i̶s̴o̷ _[CHYBA DEKODOVANI]_],
  table.cell(colspan: 2, inset: 0pt, [#body-grid]),
  table.cell(colspan: 2, inset: 0pt, table(
    columns: (1fr, 2fr, 1fr),
    align(center + horizon, rotate(90deg, reflow: true, image("images/three-body-logo-smaller.svg", height: 5em))),
    [],
    align(horizon + right, [20. 9. 2025])
  ))
)
